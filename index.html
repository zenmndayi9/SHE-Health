<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#E8766D">
    <title>S.H.E Wellness Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: system-ui, -apple-system, sans-serif; }
        .coral { color: #E8766D; }
        .coral-bg { background: #E8766D; }
        .coral-light { background: #FEF0EF; }
        .coral-border { border-color: #E8766D; }
        .btn { background: #E8766D; transition: 0.3s; }
        .btn:hover { background: #D66960; }
        .nav-item { cursor: pointer; transition: 0.2s; }
        .nav-item.active { background: #E8766D; color: white; }
    </style>
</head>
<body class="bg-white">
    <div id="app"></div>
    <script>
        const icons = {
            home: 'üè†', ruler: 'üìè', target: 'üéØ', smile: 'üòä', book: 'üìñ', camera: 'üì∑',
            plus: '‚ûï', check: '‚úì', x: '‚úï'
        };

        class Hub {
            constructor() {
                this.section = 'home';
                this.data = JSON.parse(localStorage.getItem('she_data') || '{"measurements":[],"goals":[],"habits":[],"moods":[],"journal":[],"photos":[]}');
                this.render();
            }

            save() { localStorage.setItem('she_data', JSON.stringify(this.data)); }

            nav(s) { this.section = s; this.render(); }

            render() {
                document.getElementById('app').innerHTML = `
                    <div class="pb-20">
                        <div class="coral-bg text-white p-6 text-center sticky top-0 z-10 shadow-lg">
                            <h1 class="text-3xl font-bold">S.H.E</h1>
                            <p class="text-xs tracking-widest opacity-90">SISTERHOOD ‚Ä¢ HEALING ‚Ä¢ ELEVATION</p>
                        </div>
                        <div class="p-4 max-w-4xl mx-auto">${this.getSection()}</div>
                        <div class="fixed bottom-0 w-full bg-white border-t-2 coral-border shadow-lg">
                            <div class="flex justify-around py-2">
                                ${['home','measurements','goals','mood','journal','photos'].map(s => 
                                    `<div class="nav-item flex flex-col items-center p-2 rounded ${this.section===s?'active':''}" onclick="app.nav('${s}')">
                                        <span class="text-xl">${icons[s==='measurements'?'ruler':s==='goals'?'target':s==='mood'?'smile':s==='journal'?'book':s==='photos'?'camera':'home']}</span>
                                        <span class="text-xs mt-1">${s[0].toUpperCase()+s.slice(1)}</span>
                                    </div>`
                                ).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }

            getSection() {
                switch(this.section) {
                    case 'home': return this.home();
                    case 'measurements': return this.measurements();
                    case 'goals': return this.goalsHabits();
                    case 'mood': return this.mood();
                    case 'journal': return this.journal();
                    case 'photos': return this.photos();
                }
            }

            home() {
                const goals = this.data.goals.filter(g=>!g.done).length;
                const today = new Date().toISOString().split('T')[0];
                const habits = this.data.habits.filter(h=>h.logs?.find(l=>l.date===today&&l.done)).length;
                
                return `
                    <h2 class="text-2xl font-bold mb-4">Welcome Back! üí™üèæ</h2>
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        ${[['Active Goals',goals],['Habits Today',habits+'/'+this.data.habits.length],['Journal',this.data.journal.length],['Photos',this.data.photos.length]].map(([l,v])=>
                            `<div class="bg-white rounded-xl shadow-lg p-4 border-2 coral-border">
                                <p class="text-sm text-gray-600">${l}</p>
                                <p class="text-3xl font-bold coral">${v}</p>
                            </div>`
                        ).join('')}
                    </div>
                    ${this.data.moods[0]?`<div class="bg-white rounded-xl shadow-lg p-4 mb-4">
                        <h3 class="font-bold mb-2">Latest Mood</h3>
                        <p class="text-4xl">${this.data.moods[0].emoji}</p>
                        <p class="text-sm text-gray-600">${this.data.moods[0].feeling}</p>
                    </div>`:''}
                    <div class="bg-white rounded-xl shadow-lg p-4">
                        <h3 class="font-bold mb-3">Quick Actions</h3>
                        <div class="grid grid-cols-2 gap-2">
                            ${['measurements','mood','journal','photos'].map(s=>
                                `<button onclick="app.nav('${s}')" class="btn text-white py-3 rounded-lg font-medium">
                                    ${s[0].toUpperCase()+s.slice(1)}
                                </button>`
                            ).join('')}
                        </div>
                    </div>
                `;
            }

            measurements() {
                return `
                    <h2 class="text-2xl font-bold mb-4">Body Measurements</h2>
                    <button onclick="app.addMeasurement()" class="w-full btn text-white py-3 rounded-lg font-medium mb-4">
                        ${icons.plus} Add Entry
                    </button>
                    ${this.data.measurements.slice(0,10).map(m=>`
                        <div class="bg-white rounded-xl shadow-lg p-4 mb-3">
                            <p class="font-bold coral">${new Date(m.date).toLocaleDateString()}</p>
                            <p class="text-sm text-gray-600 mt-1">Waist: ${m.waist}cm ‚Ä¢ Hips: ${m.hips}cm ‚Ä¢ Weight: ${m.weight}kg</p>
                        </div>
                    `).join('')||'<p class="text-center text-gray-500 mt-8">No entries yet!</p>'}
                `;
            }

            goalsHabits() {
                const today = new Date().toISOString().split('T')[0];
                return `
                    <div class="mb-8">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-2xl font-bold">Goals</h2>
                            <button onclick="app.addGoal()" class="btn text-white px-4 py-2 rounded-lg">${icons.plus}</button>
                        </div>
                        ${this.data.goals.map((g,i)=>`
                            <div class="bg-white rounded-xl shadow-lg p-4 mb-3 ${g.done?'opacity-50':''}">
                                <div class="flex justify-between items-start">
                                    <div class="flex-1">
                                        <h3 class="font-bold ${g.done?'line-through':''}">${g.title}</h3>
                                        <p class="text-sm text-gray-600">${g.desc||''}</p>
                                        <p class="text-xs coral mt-1">Target: ${new Date(g.target).toLocaleDateString()}</p>
                                    </div>
                                    <button onclick="app.toggleGoal(${i})" class="${g.done?'coral-bg':'bg-gray-300'} text-white w-8 h-8 rounded-full">
                                        ${icons.check}
                                    </button>
                                </div>
                            </div>
                        `).join('')||'<p class="text-center text-gray-500 py-4">No goals yet!</p>'}
                    </div>
                    <div>
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-2xl font-bold">Habits</h2>
                            <button onclick="app.addHabit()" class="btn text-white px-4 py-2 rounded-lg">${icons.plus}</button>
                        </div>
                        ${this.data.habits.map((h,i)=>{
                            const done = h.logs?.find(l=>l.date===today)?.done||false;
                            return `
                                <div class="bg-white rounded-xl shadow-lg p-4 mb-3">
                                    <div class="flex justify-between items-center">
                                        <div class="flex-1">
                                            <h3 class="font-bold">${h.name}</h3>
                                            <p class="text-xs text-gray-500">Streak: ${this.streak(h)} üî•</p>
                                        </div>
                                        <button onclick="app.toggleHabit(${i})" class="${done?'coral-bg':'bg-gray-300'} text-white w-10 h-10 rounded-full">
                                            ${icons.check}
                                        </button>
                                    </div>
                                </div>
                            `;
                        }).join('')||'<p class="text-center text-gray-500 py-4">No habits yet!</p>'}
                    </div>
                `;
            }

            mood() {
                const moods = [
                    ['üòä','Great'],['üôÇ','Good'],['üòê','Okay'],['üòî','Low'],['üò¢','Sad']
                ];
                return `
                    <h2 class="text-2xl font-bold mb-4">Mood Tracker</h2>
                    <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                        <h3 class="font-bold mb-4">How are you feeling?</h3>
                        <div class="grid grid-cols-5 gap-2">
                            ${moods.map(([e,f])=>
                                `<button onclick="app.logMood('${e}','${f}')" class="flex flex-col items-center p-3 rounded-lg hover:bg-gray-50">
                                    <span class="text-4xl mb-1">${e}</span>
                                    <span class="text-xs text-gray-600">${f}</span>
                                </button>`
                            ).join('')}
                        </div>
                    </div>
                    ${this.data.moods.slice(0,10).map(m=>`
                        <div class="bg-white rounded-xl shadow-lg p-4 mb-3 flex items-center gap-3">
                            <span class="text-3xl">${m.emoji}</span>
                            <div class="flex-1">
                                <p class="font-medium">${m.feeling}</p>
                                <p class="text-xs text-gray-500">${new Date(m.date).toLocaleString()}</p>
                                ${m.note?`<p class="text-sm text-gray-600 mt-1">${m.note}</p>`:''}
                            </div>
                        </div>
                    `).join('')}
                `;
            }

            journal() {
                return `
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold">Journal</h2>
                        <button onclick="app.addJournal()" class="btn text-white px-4 py-2 rounded-lg">${icons.plus}</button>
                    </div>
                    ${this.data.journal.map((e,i)=>`
                        <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
                            <div class="flex justify-between mb-2">
                                <h3 class="font-bold coral">${e.title||'Untitled'}</h3>
                                <button onclick="app.delJournal(${i})" class="text-gray-400 hover:text-red-500">${icons.x}</button>
                            </div>
                            <p class="text-sm text-gray-600 whitespace-pre-wrap">${e.content.substring(0,150)}${e.content.length>150?'...':''}</p>
                            <p class="text-xs text-gray-400 mt-2">${new Date(e.date).toLocaleString()}</p>
                        </div>
                    `).join('')||'<p class="text-center text-gray-500 py-8">No entries yet!</p>'}
                `;
            }

            photos() {
                return `
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold">Progress Photos</h2>
                        <button onclick="app.addPhoto()" class="btn text-white px-4 py-2 rounded-lg">${icons.plus}</button>
                    </div>
                    ${this.data.photos.length?`
                        <div class="grid grid-cols-2 gap-4">
                            ${this.data.photos.map(p=>`
                                <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                                    <img src="${p.url}" class="w-full h-48 object-cover">
                                    <div class="p-2">
                                        <p class="text-xs text-gray-600">${new Date(p.date).toLocaleDateString()}</p>
                                        ${p.note?`<p class="text-sm mt-1">${p.note}</p>`:''}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `:'<p class="text-center text-gray-500 py-8">No photos yet!</p>'}
                `;
            }

            addMeasurement() {
                const waist = prompt('Waist (cm):');
                const hips = prompt('Hips (cm):');
                const weight = prompt('Weight (kg):');
                if(waist||hips||weight) {
                    this.data.measurements.unshift({
                        date: new Date().toISOString(),
                        waist: parseFloat(waist)||0,
                        hips: parseFloat(hips)||0,
                        weight: parseFloat(weight)||0
                    });
                    this.save(); this.render();
                }
            }

            addGoal() {
                const title = prompt('Goal:');
                if(!title) return;
                const desc = prompt('Description:');
                const target = prompt('Target date (YYYY-MM-DD):') || new Date(Date.now()+30*86400000).toISOString().split('T')[0];
                this.data.goals.unshift({title,desc,target,done:false});
                this.save(); this.render();
            }

            toggleGoal(i) {
                this.data.goals[i].done = !this.data.goals[i].done;
                this.save(); this.render();
            }

            addHabit() {
                const name = prompt('Habit name:');
                if(name) {
                    this.data.habits.push({name,logs:[]});
                    this.save(); this.render();
                }
            }

            toggleHabit(i) {
                const today = new Date().toISOString().split('T')[0];
                const h = this.data.habits[i];
                if(!h.logs) h.logs = [];
                const log = h.logs.find(l=>l.date===today);
                if(log) log.done = !log.done;
                else h.logs.push({date:today,done:true});
                this.save(); this.render();
            }

            streak(h) {
                if(!h.logs?.length) return 0;
                let s = 0;
                const logs = [...h.logs].sort((a,b)=>new Date(b.date)-new Date(a.date));
                for(let l of logs) { if(l.done) s++; else break; }
                return s;
            }

            logMood(emoji, feeling) {
                const note = prompt('Any notes?') || '';
                this.data.moods.unshift({emoji,feeling,note,date:new Date().toISOString()});
                this.save(); this.render();
            }

            addJournal() {
                const title = prompt('Title:');
                const content = prompt('Write your entry:');
                if(content) {
                    this.data.journal.unshift({title,content,date:new Date().toISOString()});
                    this.save(); this.render();
                }
            }

            delJournal(i) {
                if(confirm('Delete this entry?')) {
                    this.data.journal.splice(i,1);
                    this.save(); this.render();
                }
            }

            addPhoto() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'image/*';
                input.onchange = e => {
                    const file = e.target.files[0];
                    if(!file) return;
                    const reader = new FileReader();
                    reader.onload = ev => {
                        const note = prompt('Add a note:') || '';
                        this.data.photos.unshift({
                            url: ev.target.result,
                            note,
                            date: new Date().toISOString()
                        });
                        this.save(); this.render();
                    };
                    reader.readAsDataURL(file);
                };
                input.click();
            }
        }

        const app = new Hub();
    </script>
</body>
</html>