<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#E8766D">
    <title>S.H.E Wellness Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        .she-coral { color: #E8766D; }
        .she-coral-bg { background-color: #E8766D; }
        .she-coral-light { background-color: #FEF0EF; }
        .she-coral-border { border-color: #E8766D; }
        .she-button { background-color: #E8766D; transition: all 0.3s; }
        .she-button:hover { background-color: #D66960; }
        .nav-item.active { background-color: #E8766D; color: white; }
        .bottom-nav { position: fixed; bottom: 0; left: 0; right: 0; background: white; border-top: 2px solid #E8766D; z-index: 1000; }
        .content-area { padding-bottom: 80px; }
    </style>
</head>
<body class="bg-white">
    <div id="app" class="content-area p-4"></div>

    <!-- Bottom Nav -->
    <div class="bottom-nav">
        <div class="flex justify-around py-3">
            <button onclick="app.nav('home')" id="nav-home" class="nav-item flex flex-col items-center px-4 py-2 rounded-lg active">
                <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>
                <span class="text-xs mt-1">Home</span>
            </button>
            <button onclick="app.nav('measure')" id="nav-measure" class="nav-item flex flex-col items-center px-4 py-2 rounded-lg">
                <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v12M6 12h12"/></svg>
                <span class="text-xs mt-1">Track</span>
            </button>
            <button onclick="app.nav('goals')" id="nav-goals" class="nav-item flex flex-col items-center px-4 py-2 rounded-lg">
                <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
                <span class="text-xs mt-1">Goals</span>
            </button>
            <button onclick="app.nav('habits')" id="nav-habits" class="nav-item flex flex-col items-center px-4 py-2 rounded-lg">
                <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                <span class="text-xs mt-1">Habits</span>
            </button>
        </div>
    </div>

    <script>
    class App {
        constructor() {
            this.page = 'home';
            this.data = {
                measures: JSON.parse(localStorage.getItem('she_m') || '[]'),
                goals: JSON.parse(localStorage.getItem('she_g') || '[]'),
                habits: JSON.parse(localStorage.getItem('she_h') || '[]'),
                logs: JSON.parse(localStorage.getItem('she_l') || '{}')
            };
            this.form = null;
            this.render();
        }

        nav(page) {
            this.page = page;
            this.form = null;
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.getElementById(`nav-${page}`).classList.add('active');
            this.render();
        }

        render() {
            const el = document.getElementById('app');
            el.innerHTML = this[`render_${this.page}`]();
        }

        render_home() {
            const cm = this.data.measures.length > 1 ? this.calcTotal() : 0;
            const goals = this.data.goals.filter(g => !g.done).length;
            const habits = this.todayHabits();
            
            return `
                <div class="max-w-2xl mx-auto">
                    <div class="bg-white rounded-2xl shadow-lg p-8 mb-6 text-center border-2 she-coral-border">
                        <h1 class="text-4xl font-bold she-coral mb-2">S.H.E</h1>
                        <p class="she-coral text-sm font-medium tracking-widest">SISTERHOOD ‚Ä¢ HEALING ‚Ä¢ ELEVATION</p>
                    </div>

                    <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
                        <h2 class="text-2xl font-bold mb-4">Welcome Back! üëãüèæ</h2>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="she-coral-light rounded-xl p-4 border she-coral-border">
                                <p class="text-sm text-gray-600">Total Lost</p>
                                <p class="text-2xl font-bold she-coral">${cm} cm</p>
                            </div>
                            <div class="she-coral-light rounded-xl p-4 border she-coral-border">
                                <p class="text-sm text-gray-600">Active Goals</p>
                                <p class="text-2xl font-bold she-coral">${goals}</p>
                            </div>
                            <div class="she-coral-light rounded-xl p-4 border she-coral-border">
                                <p class="text-sm text-gray-600">Today</p>
                                <p class="text-2xl font-bold she-coral">${habits.done}/${habits.total}</p>
                            </div>
                            <div class="she-coral-light rounded-xl p-4 border she-coral-border">
                                <p class="text-sm text-gray-600">Entries</p>
                                <p class="text-2xl font-bold she-coral">${this.data.measures.length}</p>
                            </div>
                        </div>
                    </div>

                    <div class="space-y-3">
                        <button onclick="app.nav('measure')" class="w-full she-button text-white py-3 rounded-lg font-medium">
                            üìè Add Measurements
                        </button>
                        <button onclick="app.nav('goals')" class="w-full border-2 she-coral-border she-coral py-3 rounded-lg font-medium">
                            üéØ Set a Goal
                        </button>
                        <button onclick="app.nav('habits')" class="w-full border-2 she-coral-border she-coral py-3 rounded-lg font-medium">
                            ‚úÖ Track Habits
                        </button>
                    </div>
                </div>
            `;
        }

        render_measure() {
            if (this.form === 'measure') return this.renderMeasureForm();
            
            return `
                <div class="max-w-2xl mx-auto">
                    <div class="bg-white rounded-2xl shadow-lg p-6 mb-4">
                        <div class="flex justify-between items-center">
                            <h2 class="text-2xl font-bold">Measurements</h2>
                            <button onclick="app.form='measure'; app.render()" class="she-button text-white px-4 py-2 rounded-lg">+ Add</button>
                        </div>
                    </div>
                    ${this.data.measures.length === 0 ? '<div class="bg-white rounded-2xl shadow-lg p-12 text-center"><p class="text-gray-600">No entries yet</p></div>' : 
                    this.data.measures.map((m, i) => `
                        <div class="bg-white rounded-xl shadow-lg p-4 mb-3">
                            <p class="font-bold mb-3">${new Date(m.date).toLocaleDateString('en-ZA')}</p>
                            <div class="grid grid-cols-3 gap-2 text-sm">
                                ${['waist','hips','bust','leftArm','rightArm','leftThigh','rightThigh','leftCalf','rightCalf','weight'].map(k => 
                                    m[k] ? `<div class="bg-gray-50 p-2 rounded"><p class="text-xs text-gray-600">${k}</p><p class="font-bold">${m[k]} ${k==='weight'?'kg':'cm'}</p></div>` : ''
                                ).join('')}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        renderMeasureForm() {
            return `
                <div class="max-w-2xl mx-auto bg-white rounded-2xl shadow-lg p-6">
                    <h2 class="text-2xl font-bold mb-4">Add Entry</h2>
                    <input type="date" id="date" value="${new Date().toISOString().split('T')[0]}" class="w-full px-3 py-2 border-2 rounded-lg mb-3">
                    <div class="grid grid-cols-2 gap-3 mb-3">
                        ${['waist','hips','bust','leftArm','rightArm','leftThigh','rightThigh','leftCalf','rightCalf','weight'].map(f => `
                            <input type="number" step="0.1" id="${f}" placeholder="${f} ${f==='weight'?'(kg)':'(cm)'}" class="px-3 py-2 border-2 rounded-lg">
                        `).join('')}
                    </div>
                    <textarea id="notes" rows="2" placeholder="Notes" class="w-full px-3 py-2 border-2 rounded-lg mb-3"></textarea>
                    <div class="flex gap-3">
                        <button onclick="app.saveMeasure()" class="flex-1 she-button text-white py-3 rounded-lg">Save</button>
                        <button onclick="app.form=null; app.render()" class="px-6 py-3 border-2 she-coral-border she-coral rounded-lg">Cancel</button>
                    </div>
                </div>
            `;
        }

        saveMeasure() {
            const m = {id: Date.now(), date: document.getElementById('date').value};
            ['waist','hips','bust','leftArm','rightArm','leftThigh','rightThigh','leftCalf','rightCalf','weight'].forEach(f => {
                m[f] = parseFloat(document.getElementById(f).value) || 0;
            });
            m.notes = document.getElementById('notes').value;
            this.data.measures.unshift(m);
            localStorage.setItem('she_m', JSON.stringify(this.data.measures));
            this.form = null;
            this.render();
        }

        render_goals() {
            if (this.form === 'goal') return this.renderGoalForm();
            
            const active = this.data.goals.filter(g => !g.done);
            const done = this.data.goals.filter(g => g.done);
            
            return `
                <div class="max-w-2xl mx-auto">
                    <div class="bg-white rounded-2xl shadow-lg p-6 mb-4">
                        <div class="flex justify-between items-center">
                            <h2 class="text-2xl font-bold">üéØ Goals</h2>
                            <button onclick="app.form='goal'; app.render()" class="she-button text-white px-4 py-2 rounded-lg">+ New</button>
                        </div>
                    </div>
                    ${this.data.goals.length === 0 ? '<div class="bg-white rounded-xl shadow-lg p-12 text-center"><p class="text-gray-600">No goals yet</p></div>' : ''}
                    ${active.map(g => `
                        <div class="bg-white rounded-xl shadow-lg p-4 mb-3 border-2 she-coral-border">
                            <div class="flex justify-between">
                                <div class="flex-1">
                                    <h3 class="font-bold text-lg">${g.title}</h3>
                                    <p class="text-sm text-gray-600">${g.desc}</p>
                                    <p class="text-xs she-coral mt-2">üóì ${new Date(g.target).toLocaleDateString('en-ZA')}</p>
                                </div>
                                <button onclick="app.toggleGoal(${g.id})" class="ml-2 w-8 h-8 rounded-full border-2 she-coral-border"></button>
                            </div>
                        </div>
                    `).join('')}
                    ${done.length > 0 ? `<p class="font-bold mt-4 mb-2">Completed ‚úì</p>` : ''}
                    ${done.map(g => `
                        <div class="bg-gray-100 rounded-xl p-4 mb-3 opacity-75">
                            <h3 class="font-bold line-through">${g.title}</h3>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        renderGoalForm() {
            return `
                <div class="max-w-2xl mx-auto bg-white rounded-2xl shadow-lg p-6">
                    <h2 class="text-2xl font-bold mb-4">New Goal</h2>
                    <input type="text" id="title" placeholder="Goal title" class="w-full px-3 py-2 border-2 rounded-lg mb-3">
                    <textarea id="desc" rows="2" placeholder="Why is this important?" class="w-full px-3 py-2 border-2 rounded-lg mb-3"></textarea>
                    <input type="date" id="target" class="w-full px-3 py-2 border-2 rounded-lg mb-3">
                    <div class="flex gap-3">
                        <button onclick="app.saveGoal()" class="flex-1 she-button text-white py-3 rounded-lg">Save Goal</button>
                        <button onclick="app.form=null; app.render()" class="px-6 py-3 border-2 she-coral-border she-coral rounded-lg">Cancel</button>
                    </div>
                </div>
            `;
        }

        saveGoal() {
            const g = {
                id: Date.now(),
                title: document.getElementById('title').value,
                desc: document.getElementById('desc').value,
                target: document.getElementById('target').value,
                done: false
            };
            this.data.goals.push(g);
            localStorage.setItem('she_g', JSON.stringify(this.data.goals));
            this.form = null;
            this.render();
        }

        toggleGoal(id) {
            const g = this.data.goals.find(x => x.id === id);
            if (g) {
                g.done = !g.done;
                localStorage.setItem('she_g', JSON.stringify(this.data.goals));
                this.render();
            }
        }

        render_habits() {
            if (this.form === 'habit') return this.renderHabitForm();
            
            const today = new Date().toISOString().split('T')[0];
            
            return `
                <div class="max-w-2xl mx-auto">
                    <div class="bg-white rounded-2xl shadow-lg p-6 mb-4">
                        <div class="flex justify-between items-center">
                            <h2 class="text-2xl font-bold">‚úÖ Habits</h2>
                            <button onclick="app.form='habit'; app.render()" class="she-button text-white px-4 py-2 rounded-lg">+ New</button>
                        </div>
                    </div>
                    ${this.data.habits.length === 0 ? '<div class="bg-white rounded-xl shadow-lg p-12 text-center"><p class="text-gray-600">No habits yet</p></div>' : ''}
                    ${this.data.habits.map(h => {
                        const checked = this.data.logs[today]?.[h.id] || false;
                        const streak = this.calcStreak(h.id);
                        return `
                            <div class="bg-white rounded-xl shadow-lg p-4 mb-3 border-2 ${checked ? 'she-coral-border she-coral-light' : 'border-gray-200'}">
                                <div class="flex items-center gap-4">
                                    <button onclick="app.toggleHabit(${h.id})" class="w-8 h-8 rounded-full border-2 she-coral-border flex items-center justify-center ${checked ? 'she-coral-bg text-white' : ''}">
                                        ${checked ? '‚úì' : ''}
                                    </button>
                                    <div class="flex-1">
                                        <h3 class="font-bold ${checked ? 'line-through' : ''}">${h.name}</h3>
                                        <p class="text-sm text-gray-600">${h.freq}</p>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-2xl font-bold she-coral">${streak}</p>
                                        <p class="text-xs text-gray-600">days</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
        }

        renderHabitForm() {
            return `
                <div class="max-w-2xl mx-auto bg-white rounded-2xl shadow-lg p-6">
                    <h2 class="text-2xl font-bold mb-4">New Habit</h2>
                    <input type="text" id="name" placeholder="Habit name (e.g., Drink 2L water)" class="w-full px-3 py-2 border-2 rounded-lg mb-3">
                    <select id="freq" class="w-full px-3 py-2 border-2 rounded-lg mb-3">
                        <option>Daily</option>
                        <option>3x per week</option>
                        <option>5x per week</option>
                    </select>
                    <div class="flex gap-3">
                        <button onclick="app.saveHabit()" class="flex-1 she-button text-white py-3 rounded-lg">Save Habit</button>
                        <button onclick="app.form=null; app.render()" class="px-6 py-3 border-2 she-coral-border she-coral rounded-lg">Cancel</button>
                    </div>
                </div>
            `;
        }

        saveHabit() {
            const h = {
                id: Date.now(),
                name: document.getElementById('name').value,
                freq: document.getElementById('freq').value
            };
            this.data.habits.push(h);
            localStorage.setItem('she_h', JSON.stringify(this.data.habits));
            this.form = null;
            this.render();
        }

        toggleHabit(id) {
            const today = new Date().toISOString().split('T')[0];
            if (!this.data.logs[today]) this.data.logs[today] = {};
            this.data.logs[today][id] = !this.data.logs[today][id];
            localStorage.setItem('she_l', JSON.stringify(this.data.logs));
            this.render();
        }

        calcTotal() {
            if (this.data.measures.length < 2) return 0;
            const latest = this.data.measures[0];
            const first = this.data.measures[this.data.measures.length - 1];
            let total = 0;
            ['waist','hips','bust','leftArm','rightArm','leftThigh','rightThigh','leftCalf','rightCalf'].forEach(k => {
                if (latest[k] && first[k]) total += first[k] - latest[k];
            });
            return total.toFixed(1);
        }

        todayHabits() {
            const today = new Date().toISOString().split('T')[0];
            const done = Object.values(this.data.logs[today] || {}).filter(Boolean).length;
            return { done, total: this.data.habits.length };
        }

        calcStreak(id) {
            let streak = 0;
            const dates = Object.keys(this.data.logs).sort().reverse();
            for (let date of dates) {
                if (this.data.logs[date][id]) streak++;
                else break;
            }
            return streak;
        }
    }

    const app = new App();
    </script>
</body>
</html>